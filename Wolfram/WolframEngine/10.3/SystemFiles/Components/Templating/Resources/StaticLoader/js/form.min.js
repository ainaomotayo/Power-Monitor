!function($){$.fn.registerPlugin=function(plugin,name){$.fn[name]=function(option,parameter){return this.each(function(){var data=$(this).data(name),options="object"==typeof option&&option;data||(data=new plugin(this,options),$(this).data(name,data)),"string"==typeof option&&(data[option](parameter),"destroy"===option&&$(this).data(name,!1))})},$.fn[name].plugin=plugin}}(window.jQuery);var Color=function(val){this.value={h:0,s:0,v:0,a:1,valid:!1},this.format=null,this.input=val,val&&(void 0!==val.toLowerCase?this.setColor(val):void 0!==val.h&&(this.value=val))};Color.prototype={constructor:Color,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_sanitizeNumber:function(val){return"number"==typeof val?val:isNaN(val)||null===val||""===val||void 0===val?1:void 0!==val.toLowerCase?parseFloat(val):1},copy:function(){return new Color($.extend(!0,{},this.value))},setColor:function(strVal){strVal=strVal.toLowerCase(),this.value=this.stringToHSV(strVal)||{h:0,s:0,v:0,a:1,valid:!1},this.input=strVal},stringToHSV:function(strVal){strVal=strVal.toLowerCase().trim();var that=this,result=!1;return $.each(this.stringParsers,function(i,parser){var match=parser.re.exec(strVal),values=match&&parser.parse.apply(that,[match]),format=parser.format||"rgba";return values?(result=format.match(/hsla?/)?that.RGBtoHSV.apply(that,that.HSLtoRGB.apply(that,values)):that.RGBtoHSV.apply(that,values),that.format=format,!1):!0}),result&&(result.valid=!0),result},toRGB:function(h,s,v,a){void 0==h&&(h=this.value.h),void 0==s&&(s=this.value.s),void 0==v&&(v=this.value.v),void 0==a&&(a=this.value.a),h*=360;var R,G,B,X,C;return h=h%360/60,C=v*s,X=C*(1-Math.abs(h%2-1)),R=G=B=v-C,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],{r:R,g:G,b:B,a:a}},toHex:function(h,s,v,a){var rgb=this.toRGB(h,s,v,a);return"#"+(1<<24|parseInt(255*rgb.r)<<16|parseInt(255*rgb.g)<<8|parseInt(255*rgb.b)).toString(16).substr(1)},toHSL:function(h,s,v,a){void 0==h&&(h=this.value.h),void 0==s&&(s=this.value.s),void 0==v&&(v=this.value.v),void 0==a&&(a=this.value.a);var H=h,L=(2-s)*v,S=s*v;return S/=L>0&&1>=L?L:2-L,L/=2,S>1&&(S=1),{h:isNaN(H)?0:H,s:isNaN(S)?0:S,l:isNaN(L)?0:L,a:isNaN(a)?0:a,valid:!0}},toAlias:function(r,g,b,a){var rgb=this.toHex(r,g,b,a);for(var alias in this.colors)if(this.colors[alias]==rgb)return alias;return!1},RGBtoHSV:function(r,g,b,a){var H,S,V,C;return V=Math.max(r,g,b),C=V-Math.min(r,g,b),H=0===C?null:V===r?(g-b)/C:V===g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,S=0===C?0:C/V,{h:this._sanitizeNumber(H),s:S,v:V,a:this._sanitizeNumber(a),valid:!0}},HueToRGB:function(p,q,h){return 0>h?h+=1:h>1&&(h-=1),1>6*h?p+(q-p)*h*6:1>2*h?q:2>3*h?p+(q-p)*(2/3-h)*6:p},HSLtoRGB:function(h,s,v,a){0>s&&(s=0);var q;q=.5>=v?v*(1+s):v+s-v*s;var p=2*v-q,tr=h+1/3,tg=h,tb=h-1/3,r=this.HueToRGB(p,q,tr),g=this.HueToRGB(p,q,tg),b=this.HueToRGB(p,q,tb);return[r,g,b,this._sanitizeNumber(a)]},toString:function(format){switch(format||1!=this.value.a?format||(format="rgba"):format="hex",format){case"rgb":var rgb=this.toRGB();return"rgb("+Math.round(255*rgb.r)+", "+Math.round(255*rgb.g)+", "+Math.round(255*rgb.b)+")";case"rgba":var rgb=this.toRGB();return"rgba("+Math.round(255*rgb.r)+", "+Math.round(255*rgb.g)+", "+Math.round(255*rgb.b)+", "+rgb.a.toFixed(2)+")";case"hsl":var hsl=this.toHSL();return"hsl("+Math.round(360*hsl.h)+", "+Math.round(100*hsl.s)+"%, "+Math.round(100*hsl.l)+"%)";case"hsla":var hsl=this.toHSL();return"hsla("+Math.round(360*hsl.h)+", "+Math.round(100*hsl.s)+"%, "+Math.round(100*hsl.l)+"%, "+hsl.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toString();default:return!1}},stringParsers:[{re:/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,format:"hex",parse:function(execResult){return[parseInt(execResult[1],16)/255,parseInt(execResult[2],16)/255,parseInt(execResult[3],16)/255,1]}},{re:/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,format:"hex",parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16)/255,parseInt(execResult[2]+execResult[2],16)/255,parseInt(execResult[3]+execResult[3],16)/255,1]}},{re:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)$/,format:"rgb",parse:function(execResult){return[execResult[1]/255,execResult[2]/255,execResult[3]/255,1]}},{re:/^rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)$/,format:"rgb",parse:function(execResult){return[execResult[1]/100,execResult[2]/100,execResult[3]/100,1]}},{re:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/,format:"rgba",parse:function(execResult){return[execResult[1]/255,execResult[2]/255,execResult[3]/255,execResult[4]]}},{re:/^rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/,format:"rgba",parse:function(execResult){return console.log(execResult[4]),[execResult[1]/100,execResult[2]/100,execResult[3]/100,execResult[4]]}},{re:/^hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)$/,format:"hsl",parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]]}},{re:/^hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/,format:"hsla",parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(execResult){var hexval=this.colorNameToHex(execResult[0]);if(!hexval)return!1;var match=this.stringParsers[0].re.exec(hexval),values=match&&this.stringParsers[0].parse.apply(this,[match]);return values}}],colorNameToHex:function(name){return"undefined"!=typeof this.colors[name.toLowerCase()]?this.colors[name.toLowerCase()]:!1}},!function($){function DragAround(handle,options){this.options=$.extend({},this.defaults,options),this.$handle=$(handle),this.$dragging=!1,this.$document=this.$handle[0].ownerDocument,this.buildData(),this.buildContainer(),this.buildHandle(),this.buildEvents(),this.updatePosition()}DragAround.prototype={defaults:{},constructor:DragAround,buildData:function(){this.$data={clickX:0,clickY:0,valX:void 0==this.options.valX?0:parseFloat(this.options.valX),minX:void 0==this.options.minX?0:parseFloat(this.options.minX),maxX:void 0==this.options.maxX?1:parseFloat(this.options.maxX),stepX:void 0==this.options.stepX?0:parseFloat(this.options.stepX),valY:void 0==this.options.valY?0:parseFloat(this.options.valY),minY:void 0==this.options.minY?0:parseFloat(this.options.minY),maxY:void 0==this.options.maxY?1:parseFloat(this.options.maxY),stepY:void 0==this.options.stepY?0:parseFloat(this.options.stepY)},this.buildReverse()},buildReverse:function(){this.$data.reverseX=this.$data.minX>=this.$data.maxX,this.$data.reverseX&&$.extend(this.$data,{minX:this.$data.maxX,maxX:this.$data.minX}),this.$data.reverseY=this.$data.minY>=this.$data.maxY,this.$data.reverseY&&$.extend(this.$data,{minY:this.$data.maxY,maxY:this.$data.minY})},buildContainer:function(){this.$container=$(this.options.container||this.$handle.parent()),this.$button=$(this.options.button||this.$container)},buildHandle:function(){this.$handle.css({position:"absolute"})},buildEvents:function(){$(this.$document).bind("MSPointerUp touchend mouseup",$.proxy(function(event){this.$container.is(":visible")&&this.$dragging&&(this.updateClick(event),this.moveTo(),this.endDrag(),event.stopPropagation(),event.preventDefault())},this)).bind("MSPointerDown touchstart mousedown",$.proxy(function(event){this.$container.is(":visible")&&!this.$dragging&&(this.updateClick(event),this.isClickInside()&&(this.moveTo(),this.startDrag(),event.stopPropagation(),event.preventDefault(),this.$button.is(":input")&&this.$button.focus()))},this)).bind("MSPointerMove touchmove mousemove",$.proxy(function(event){this.$container.is(":visible")&&this.$dragging&&(this.updateClick(event),this.moveTo(),this.moveDrag(),event.stopPropagation(),event.preventDefault())},this)),this.$button.is(":input")&&this.$button.on("keydown",$.proxy(function(event){if(/^(13)$/.test(event.keyCode))this.$button.closest("form").submit();else if(/^(37|38|39|40)$/.test(event.keyCode)){switch(event.keyCode){case 37:this.setX(this.$data.valX-this.$data.stepX);break;case 39:this.setX(this.$data.valX+this.$data.stepX);break;case 38:this.setY(this.$data.valY-this.$data.stepY);break;case 40:this.setY(this.$data.valY-this.$data.stepY)}this.updatePosition(),this.moveDrag(),event.stopPropagation(),event.preventDefault()}},this))},startDrag:function(){this.$dragging=!0,this.options.start&&this.options.start(this.fixedTo(this.$data.valX,this.$data.stepX),this.fixedTo(this.$data.valY,this.$data.stepY))},moveDrag:function(){this.options.move&&this.options.move(this.fixedTo(this.$data.valX,this.$data.stepX),this.fixedTo(this.$data.valY,this.$data.stepY))},endDrag:function(){this.$dragging=!1,this.options.end&&this.options.end(this.fixedTo(this.$data.valX,this.$data.stepX),this.fixedTo(this.$data.valY,this.$data.stepY))},isClickInside:function(event){return this.$data.clickX>=0&&this.$data.clickX<=this.$container.width()&&this.$data.clickY>=0&&this.$data.clickY<=this.$container.height()},isTouch:function(event){return event.type.search("touch")>-1},updateClick:function(event){var offset=this.$container.offset();this.isTouch(event)?event.originalEvent.touches.length?(this.$data.clickX=event.originalEvent.touches[0].pageX-offset.left,this.$data.clickY=event.originalEvent.touches[0].pageY-offset.top):(this.$data.clickX=void 0,this.$data.clickY=void 0):(this.$data.clickX=event.pageX-offset.left,this.$data.clickY=event.pageY-offset.top)},getDecimals:function(num){return num=(num+"").split(".")[1],num?num.length:0},fixedTo:function(n,step){if(!step)return n;var a=this.getDecimals(step),b=this.getDecimals(n);return b>a?n.toFixed(a):n.toFixed(b)},roundTo:function(n,step){return step?Math.round(n/step)*step:n},setX:function(x){this.$data.valX=this.roundTo(Math.min(Math.max(this.$data.minX,x),this.$data.maxX),this.$data.stepX)},setY:function(y){this.$data.valY=this.roundTo(Math.min(Math.max(this.$data.minY,y),this.$data.maxY),this.$data.stepY)},convertTo:function(val,min,max){return(val-min)/(max-min)},convertToReverse:function(val,min,max){return min+(max-min)*val},updatePosition:function(){var x=this.convertTo(this.$data.valX,this.$data.minX,this.$data.maxX),y=this.convertTo(this.$data.valY,this.$data.minY,this.$data.maxY);this.$data.reverseX&&(x=1-x),this.$data.reverseY&&(y=1-y),"x"==this.options.axis?this.$handle.css({left:100*x+"%"}):"y"==this.options.axis?this.$handle.css({top:100*y+"%"}):this.$handle.css({left:100*x+"%",top:100*y+"%"})},moveTo:function(){if(void 0!=this.$data.clickX&&void 0!=this.$data.clickY){var x=this.$data.clickX/this.$container.width(),y=this.$data.clickY/this.$container.height();x=Math.min(Math.max(0,x),1),y=Math.min(Math.max(0,y),1),this.$data.reverseX&&(x=1-x),this.$data.reverseY&&(y=1-y),x=this.convertToReverse(x,this.$data.minX,this.$data.maxX),y=this.convertToReverse(y,this.$data.minY,this.$data.maxY),this.setX(x),this.setY(y),this.updatePosition()}}},$.fn.registerPlugin(DragAround,"dragaround")}(window.jQuery),!function($){function SliderControl(original,options){this.options=$.extend({},this.defaults,options),this.$original=$(original),this.buildButton(),this.buildBar(),this.buildContainer(),this.buildHandle(),this.buildOriginal(),this.buildTooltip()}SliderControl.prototype={constructor:SliderControl,defaults:{templates:{container:'<div class="slider-drag"/>',handle:'<div class="slider-handle-wrapper"><div class="slider-handle"/></div>',bar:'<div class="slider-bar"/>',button:'<button type="button" class="slider"/>'}},buildContainer:function(){this.$container=$(this.options.templates.container),this.$button.append(this.$container)},buildBar:function(){this.$bar=$(this.options.templates.bar),this.$button.append(this.$bar)},buildButton:function(){this.$button=$(this.options.templates.button),this.$original.attr("disabled")&&(this.$button.attr("disabled",this.$original.attr("disabled")),this.$button.addClass("disabled")),this.$original.after(this.$button)},buildHandle:function(){this.$handle=$(this.options.templates.handle),this.$container.append(this.$handle),this.$original.attr("disabled")||this.$handle.dragaround({container:this.$container,button:this.$button,axis:"x",valX:this.$original.val(),minX:this.$original.attr("min"),maxX:this.$original.attr("max"),stepX:this.$original.attr("step"),start:$.proxy(function(x,y){this.$tooltip.options.title=x,this.$tooltip.show()},this),move:$.proxy(function(x,y){this.$original.val(x),this.$tooltip.options.title=x,this.$tooltip.show()},this),end:$.proxy(function(x,y){this.$original.val(x),this.$tooltip.options.title=x,this.$tooltip.hide(),this.$original.change()},this)})},buildOriginal:function(){this.$original.addClass("slider-original").attr("type","hidden").attr("style","display:none").hide()},buildTooltip:function(){this.$tooltip=this.$handle.children().tooltip({title:this.$original.val(),trigger:"hover",animation:!1}).data("bs.tooltip"),this.$button.on("blur",$.proxy(function(){this.$tooltip.hide()},this))}},$.fn.registerPlugin(SliderControl,"slidercontrol")}(window.jQuery),!function($){function isObservableArray(obj){return ko.isObservable(obj)&&!(void 0===obj.destroyAll)}function SmartSelect(select,options){this.options=this.mergeOptions(options),this.$select=$(select),this.$id="select-dropdown-"+SELECT_COUNTER,SELECT_COUNTER++,this.originalOptions=this.$select.clone()[0].options,this.searchTimeout=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=$.proxy(this.options.onChange,this),this.options.onDropdownShow=$.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=$.proxy(this.options.onDropdownHide,this),this.options.onMouseClick=$.proxy(this.options.onMouseClick,this),this.options.onKeyDown=$.proxy(this.options.onKeyDown,this),this.buildContainer(),this.buildButton(),this.buildSelectAll(),this.buildDropdown(),this.buildDropdownOptions(),this.buildFilter(),this.buildDropdownCaret(),this.removeSelect(),this.updateButtonText(),this.updateSelectAll()}var SELECT_COUNTER=0;"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.smartselect&&(ko.bindingHandlers.smartselect={init:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var listOfSelectedItems=allBindingsAccessor().selectedOptions,config=ko.utils.unwrapObservable(valueAccessor());$(element).smartselect(config),isObservableArray(listOfSelectedItems)&&listOfSelectedItems.subscribe(function(changes){var addedArray=[],deletedArray=[];changes.forEach(function(change){switch(change.status){case"added":addedArray.push(change.value);break;case"deleted":deletedArray.push(change.value)}}),addedArray.length>0&&$(element).smartselect("select",addedArray),deletedArray.length>0&&$(element).smartselect("deselect",deletedArray)},null,"arrayChange")},update:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var listOfItems=allBindingsAccessor().options,ms=$(element).data("smartselect"),config=ko.utils.unwrapObservable(valueAccessor());isObservableArray(listOfItems)&&listOfItems.subscribe(function(theArray){$(element).smartselect("rebuild")}),ms?ms.updateOriginalOptions():$(element).smartselect(config)}}),SmartSelect.prototype={defaults:{buttonText:function(options,select){if(0===options.length)return this.nonSelectedText;if(options.length>this.numberDisplayed)return options.length+" "+this.nSelectedText;var selected="";return options.each(function(){var label=void 0!==$(this).attr("label")?$(this).attr("label"):$(this).html();selected+=label+", "}),selected.substr(0,selected.length-2)},label:function(element){return $(element).attr("label")||$(element).html()},onChange:function(option,checked){},onMouseClick:function(event){event.preventDefault()},onKeyDown:function(event){},onDropdownShow:function(event){this.$search.val(""),this.refreshFilter(),this.showFilter()},onDropdownHide:function(event){this.hideFilter()},showInput:!1,dropRight:!1,selectedClass:"active",buttonWidth:"auto",maxHeight:!1,checkboxName:null,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"smartselect-all",showFiltering:!1,filterPlaceholder:"Search",preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",numberDisplayed:3,templates:{caret:'<i class="icon-dropdown text-muted form-control-feedback select-caret"></i>',container:'<div class="select"></div>',button:'<button type="button" class="smartselect dropdown-toggle"/>',ul:'<ul class="smartselect-dropdown dropdown-menu"></ul>',filter:'<li class="has-feedback"><input class="form-control select-search" type="search"><i class="glyphicon glyphicon-search icon-search form-control-feedback"></i></li>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="divider"></li>',liGroup:'<li><label class="smartselect-group"></label></li>'}},constructor:SmartSelect,removeSelect:function(){this.$select.hide().addClass("select-hidden")},buildContainer:function(){this.$container=$(this.options.templates.container).attr("id",this.$id).on("show.bs.dropdown",this.options.onDropdownShow).on("hide.bs.dropdown",this.options.onDropdownHide).on("click.bs.dropdown",this.options.onMouseClick),this.$select.after(this.$container),this.$container.on("keydown",$.proxy(function(event){if(this.$button.is(":visible")){if(event.stopPropagation(),/^(9|27)$/.test(event.keyCode))return this.$container.hasClass("open")&&this.$button.trigger("click.bs.dropdown"),void(/^(9)$/.test(event.keyCode)&&this.$button.focus());if(/^(32|13)$/.test(event.keyCode)){if(32===event.keyCode&&this.$search.is(":focus"))return;return this.$filter.is(".active")?(event.stopPropagation(),void event.preventDefault()):void(this.$container.hasClass("open")&&(this.$container.find("li.active input").change(),this.$button.trigger("click.bs.dropdown")))}if(/^(38|40)$/.test(event.keyCode)){if(event.preventDefault(),!this.$container.hasClass("open"))return void this.$button.trigger("click.bs.dropdown");var $items=$(this.$container).find("li:not(.divider):visible");if(!$items.length)return;var index=$items.index($items.filter(".active"));if(38===event.keyCode){if(!(index>0))return void(this.$container.hasClass("open")&&this.$button.focus().trigger("click.bs.dropdown"));index--}else 40===event.keyCode&&index<$items.length-1?index++:~index||(index=0);$items.removeClass("active").find("input").removeAttr("checked");var $current=$items.eq(index);$current.addClass("active");var $checkbox=$current.find('input[type!="search"]');$checkbox.prop("checked",!$checkbox.prop("checked")),this.$filter.hasClass("active")?this.$search.filter(":not(:focus)").focus():this.$search.val()||this.$button.focus()}else if(/^(37|39)$/.test(event.keyCode)&&!this.$filter.is(":visible"));else{if(/^(16|17|18|20|91)$/.test(event.keyCode))return;if(this.$search){if(!String.fromCharCode(event.keyCode).trim())return;if($(this.$container).find("li:not(.divider)").length<=11)return;if(this.$container.hasClass("open")||this.$button.trigger("click.bs.dropdown"),this.$filter.filter(":not(:visible)").show(),this.$search.filter(":not(:focus)").focus(),/^(13)$/.test(event.keyCode))return event.stopPropagation(),void event.preventDefault();clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction($.proxy(this.refreshFilter,this),100,this)}}}},this))},buildDropdownCaret:function(){this.$caret=$(this.options.templates.caret).attr("data-target","#"+this.$id).attr("data-toggle","dropdown").attr("style","cursor:pointer"),this.$button.after(this.$caret),this.$caret.closest(".form-group").addClass("has-feedback")},buildButton:function(){this.$button=$(this.options.templates.button);for(var i=0;i<this.$select[0].attributes.length;i++){var a=this.$select[0].attributes[i];/^(value|name|id|type)$/.test(a.name)||this.$button.attr(a.name,a.value)}this.$button.attr("data-target","#"+this.$id).attr("data-toggle","dropdown").off("keydown.bs.dropdown.data-api").closest(".form-group").addClass("has-feedback"),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&this.$button.css({width:this.options.buttonWidth});var tabindex=this.$select.attr("tabindex");tabindex&&this.$button.attr("tabindex",tabindex),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=$(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each($.proxy(function(index,element){var tag=$(element).prop("tagName").toLowerCase();"optgroup"===tag?this.createOptgroup(element):"option"===tag&&("divider"===$(element).data("role")?this.createDivider():this.createOptionValue(element))},this)),$("li input",this.$ul).on("change",$.proxy(function(event){var $target=$(event.target),checked=$target.prop("checked")||!1,isSelectAllOption=$target.val()===this.options.selectAllValue;this.options.selectedClass&&(checked?$target.parents("li").addClass(this.options.selectedClass):$target.parents("li").removeClass(this.options.selectedClass));var value=$target.val(),$option=this.getOptionByValue(value),$optionsNotThis=$("option",this.$select).not($option),$checkboxesNotThis=$("input",this.$container).not($target);if(isSelectAllOption){for(var values=[],availableInputs=$('li input[value!="'+this.options.selectAllValue+'"][data-role!="divider"]',this.$ul).filter(":visible"),i=0,j=availableInputs.length;j>i;i++)values.push(availableInputs[i].value);checked?this.select(values):this.deselect(values)}return checked?($option.prop("selected",!0),this.options.multiple?$option.prop("selected",!0):(this.options.selectedClass&&$($checkboxesNotThis).parents("li").removeClass(this.options.selectedClass),$($checkboxesNotThis).prop("checked",!1),$optionsNotThis.prop("selected",!1),this.$button.trigger("click.bs.dropdown")),"active"===this.options.selectedClass&&$optionsNotThis.parents("a").css("outline","")):$option.prop("selected",!1),this.$select.change(),this.options.onChange($option,checked),this.updateButtonText(),this.updateSelectAll(),this.options.preventInputChangeEvent?!1:void 0},this)),$("li a",this.$ul).on("touchstart click",function(event){event.stopPropagation(),$(event.target).find("input").change()})},createOptionValue:function(element){$(element).is(":selected")&&$(element).prop("selected",!0);var label=this.options.label(element),value=$(element).val(),inputType=this.options.multiple?"checkbox":"radio",$li=$(this.options.templates.li);$("label",$li).append('<input type="'+inputType+(this.options.checkboxName?'" name="'+this.options.checkboxName:"")+'" />');var selected=$(element).prop("selected")||!1,$checkbox=$("input",$li);$checkbox.val(value),value===this.options.selectAllValue&&$checkbox.parent().parent().addClass("smartselect-all"),this.options.showInput?($("label",$li).addClass(inputType),$("label",$li).append(' <span class="'+inputType+'-label label-text">'+label+"</span>")):($("label",$li).append(' <span class="label-text">'+label+"</span>").addClass("dropdown-label"),$checkbox.hide()),$li.attr("data-label",label),this.$ul.append($li),$(element).is(":disabled")&&$checkbox.attr("disabled","disabled").prop("disabled",!0).parents("li").addClass("disabled"),$checkbox.prop("checked",selected),selected&&this.options.selectedClass&&$checkbox.parents("li").addClass(this.options.selectedClass)},createDivider:function(element){var $divider=$(this.options.templates.divider);this.$ul.append($divider)},createOptgroup:function(group){var groupName=$(group).prop("label"),$li=$(this.options.templates.liGroup);$("label",$li).text(groupName),this.$ul.append($li),$(group).is(":disabled")&&$li.addClass("disabled"),$("option",group).each($.proxy(function(index,element){this.createOptionValue(element)},this))},buildSelectAll:function(){var alreadyHasSelectAll=this.hasSelectAll();!alreadyHasSelectAll&&this.options.includeSelectAllOption&&this.options.multiple&&$('option[data-role!="divider"]',this.$select).length>this.options.includeSelectAllIfMoreThan&&(this.options.includeSelectAllDivider&&this.$select.prepend('<option value="" disabled="disabled" data-role="divider">'),this.$select.prepend('<option value="'+this.options.selectAllValue+'">'+this.options.selectAllText+"</option>"))},refreshFilter:function(){$.each($("li",this.$ul),$.proxy(function(index,element){var value=$("input",element).val(),label=$(element).attr("data-label");if(value!==this.options.selectAllValue&&label){var result=label;if(""!==this.$search.val().trim()){var and_query="",or_query="";$.each(this.$search.val().trim().replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&").split(/\s{1,}/g),function(index,value){and_query+="(?=.*"+value+")",""==!or_query&&(or_query+="|"),or_query+=value});var showElement=label.match(new RegExp(and_query,"ig"));showElement&&(result=label.replace(new RegExp("("+or_query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"}))}else var showElement=!0;showElement?$(element).show().find(".label-text").html(result):$(element).hide()}},this))},buildFilter:function(){this.$filter=$(this.options.templates.filter),this.$search=this.$filter.find("[type=search]").on("click",$.proxy(function(event){event.stopPropagation(),this.$container.find("li.active").removeClass("active"),this.$filter.addClass("active")},this)),$("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.$ul.prepend(this.$filter),this.$filter.val("").on("click",function(event){event.stopPropagation()}),this.showFilter()},showFilter:function(){this.options.showFiltering?(this.$filter.show(),this.$search.val("")):this.$filter.hide()},hideFilter:function(){},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("smartselect",null)},refresh:function(){$("option",this.$select).each($.proxy(function(index,element){var $input=$("li input",this.$ul).filter(function(){return $(this).val()===$(element).val()});$(element).is(":selected")?($input.prop("checked",!0),this.options.selectedClass&&$input.parents("li").addClass(this.options.selectedClass)):($input.prop("checked",!1),this.options.selectedClass&&$input.parents("li").removeClass(this.options.selectedClass)),$(element).is(":disabled")?$input.attr("disabled","disabled").prop("disabled",!0).parents("li").addClass("disabled"):$input.prop("disabled",!1).parents("li").removeClass("disabled"),$input.attr("data-label",$(element).text())},this)),this.updateButtonText(),this.updateSelectAll()},select:function(selectValues){$.isArray(selectValues)||(selectValues=[selectValues]);for(var i=0;i<selectValues.length;i++){var value=selectValues[i],$option=this.getOptionByValue(value),$checkbox=this.getInputByValue(value);this.options.selectedClass&&$checkbox.parents("li").addClass(this.options.selectedClass),$checkbox.prop("checked",!0),$option.prop("selected",!0)}this.updateButtonText()},clearSelection:function(){var selected=this.getSelected();if(selected.length){for(var arry=[],i=0;i<selected.length;i+=1)arry.push(selected[i].value);this.deselect(arry),this.$select.change()}},deselect:function(deselectValues){$.isArray(deselectValues)||(deselectValues=[deselectValues]);for(var i=0;i<deselectValues.length;i++){var value=deselectValues[i],$option=this.getOptionByValue(value),$checkbox=this.getInputByValue(value);this.options.selectedClass&&$checkbox.parents("li").removeClass(this.options.selectedClass),$checkbox.prop("checked",!1),$option.prop("selected",!1)}this.updateButtonText()},rebuild:function(){this.$ul.html(""),$('option[value="'+this.options.selectAllValue+'"]',this.$select).remove(),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll()},dataprovider:function(dataprovider){var optionDOM="";dataprovider.forEach(function(option){optionDOM+='<option value="'+option.value+'">'+option.label+"</option>"}),this.$select.html(optionDOM),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(options){this.options=this.mergeOptions(options)},mergeOptions:function(options){return $.extend(!0,{},this.defaults,options)},hasSelectAll:function(){return $('option[value="'+this.options.selectAllValue+'"]',this.$select).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var selected=this.getSelected();selected.length===$("option:not([data-role=divider])",this.$select).length-1?this.select(this.options.selectAllValue):this.deselect(this.options.selectAllValue)}},updateButtonText:function(){var options=this.getSelected();if(this.$button.is("input"))this.$button.val(this.options.buttonText(options,this.$select));else{var inner=this.$button.find(".select-text");0==inner.length&&(inner=$('<span class="select-text"></span>'),this.$button.append(inner)),inner.text(this.options.buttonText(options,this.$select));
}this.$button.focus()},getSelected:function(){return $('option[value!="'+this.options.selectAllValue+'"]:selected',this.$select).filter(function(){return $(this).prop("selected")})},getOptionByValue:function(value){for(var options=$("option",this.$select),valueToCompare=value.toString(),i=0;i<options.length;i+=1){var option=options[i];if(option.value===valueToCompare)return $(option)}},getInputByValue:function(value){for(var checkboxes=$("li input",this.$ul),valueToCompare=value.toString(),i=0;i<checkboxes.length;i+=1){var checkbox=checkboxes[i];if(checkbox.value===valueToCompare)return $(checkbox)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(callback,timeout,self){var args=Array.prototype.slice.call(arguments,3);return setTimeout(function(){callback.apply(self||window,args)},timeout)}},$.fn.registerPlugin(SmartSelect,"smartselect")}(window.jQuery),!function($){function ColorSetter(original,options){this.options=$.extend({},this.defaults,options),this.$container=$(original),this.buildData(),this.buildPicker()}function ColorControl(original,options){this.options=$.extend({},this.defaults,options),this.$original=$(original),this.buildContainer(),this.buildInput(),this.buildDropdown(),this.buildAddon(),this.buildModal(),this.buildData(),this.updateControl(!1,!0,!0),this.$isMobile=!0}ColorSetter.prototype={constructor:ColorSetter,defaults:{templates:{picker:'<div class="color-setter">                    <div class="color-setter-controls-base">                        <div class="color-setter-controls-hsl">                            <div class="color-setter-saturation">                                <div class="color-setter-handle"/>                            </div>                            <div class="color-setter-hue">                                <div class="color-setter-handle"/>                            </div>                        </div>                        <div class="color-setter-controls-alpha">                            <div class="color-setter-alpha">                                <div class="color-setter-handle"/>                            </div>                            <div class="color-setter-comparison">                                <div class="color-setter-previous"/>                                <div class="color-setter-current update-current"/>                            </div>                        </div>                    </div>                    <div class="color-setter-controls-advanced">                        <div class="color-control-group">                            <div class="color-control">                                <label class="control-label">R</label>                                <input type="number" min="0" max="255" step="1" class="form-control input-sm" data-component="r"/>                            </div>                            <div class="color-control">                                <label class="control-label">G</label>                                <input type="number" min="0" max="255" step="1" class="form-control input-sm" data-component="g"/>                            </div>                            <div class="color-control">                                <label class="control-label">B</label>                                <input type="number" min="0" max="255" step="1" class="form-control input-sm" data-component="b"/>                            </div>                        </div>                        <div class="color-control-group">                            <div class="color-control">                                <label class="control-label">H</label>                                <input type="number" min="0" max="360" step="1" class="form-control input-sm" data-component="h"/>                            </div>                            <div class="color-control">                                <label class="control-label">S</label>                                <input type="number" min="0" max="100" step="1" class="form-control input-sm" data-component="s"/>                            </div>                            <div class="color-control">                                <label class="control-label">V</label>                                <input type="number" min="0" max="100" step="1" class="form-control input-sm" data-component="v"/>                            </div>                        </div>                        <div class="color-control-group">                            <div class="color-control">                                <label class="control-label">A</label>                                <input type="number" min="0" max="1" step="0.01" class="form-control input-sm" data-component="a"/>                            </div>                        </div>                    </div>                    <div class="color-setter-footer">                        <button class="color-setter-advanced btn btn-default btn-sm" type="button">                            <i class="glyphicon glyphicon-cog"></i>                            Advanced                        </button>                        <button class="color-setter-cancel btn btn-default btn-sm" type="button">                            <i class="glyphicon glyphicon-remove"></i>                            Cancel                        </button>                        <button class="color-setter-ok btn btn-primary btn-sm pull-right" type="button">                            <i class="glyphicon glyphicon-ok"></i>                            Ok                        </button>                    </div>                </div>'}},buildData:function(){this.$color=new Color(this.options.color)},buildPicker:function(){function updateSL(x,y){this.updateHSV(void 0,x,y,void 0),this.updateControl(!0,!1,!0)}function updateH(x,y){this.updateHSV(y,void 0,void 0,void 0),this.updateControl(!0,!1,!0)}function updateA(x,y){this.updateHSV(void 0,void 0,void 0,x),this.updateControl(!0,!1,!0)}this.$picker=$(this.options.templates.picker),this.$container.append(this.$picker),this.$saturation=this.$container.find(".color-setter-saturation"),this.$saturationHandle=this.$saturation.find(".color-setter-handle").dragaround({start:$.proxy(updateSL,this),move:$.proxy(updateSL,this),end:$.proxy(updateSL,this),minY:1,maxY:0,valX:this.$color.s,valY:this.$color.v}),this.$hue=this.$container.find(".color-setter-hue"),this.$hueHandle=this.$hue.find(".color-setter-handle").dragaround({axis:"y",start:$.proxy(updateH,this),move:$.proxy(updateH,this),end:$.proxy(updateH,this),minY:1,maxY:0,valY:this.$color.h}),this.$alpha=this.$container.find(".color-setter-alpha"),this.$alphaHandle=this.$alpha.find(".color-setter-handle").dragaround({axis:"x",start:$.proxy(updateA,this),move:$.proxy(updateA,this),end:$.proxy(updateA,this),minX:1,maxX:0,valX:this.$color.a}),this.$current=this.$container.find(".color-setter-current").on("click",$.proxy(function(){this.$previous.trigger("click")},this)),this.$previous=this.$container.find(".color-setter-previous").css("backgroundColor",this.$color.toString()).on("click",$.proxy(function(){var current=new Color(this.$previous.css("backgroundColor"));this.$previous.css({backgroundColor:this.$color.toString()}),this.$color=current,this.updateControl(!0,!0,!0)},this)),this.$ok=this.$container.find(".color-setter-ok").on("click",$.proxy(function(){this.options.ok&&this.options.ok()},this)),this.$cancel=this.$container.find(".color-setter-cancel").on("click",$.proxy(function(){this.$color=new Color(this.$cancel.attr("data-color")),this.updateControl(!0,!0,!0),this.options.cancel&&this.options.cancel()},this)),this.$advancedContainer=this.$container.find(".color-setter-controls-advanced").hide(),this.$advanced=this.$container.find(".color-setter-advanced").on("click",$.proxy(function(){this.$advancedContainer.is(":visible")?(this.$advancedContainer.hide(),this.$advanced.removeClass("active")):(this.$advancedContainer.show(),this.$advanced.addClass("active"),this.updateControl(!1,!1,!0))},this));var self=this;this.$advancedControl=this.$advancedContainer.find(":input").on("keydown",function(event){13==event.keyCode&&($(this).trigger("change"),event.preventDefault(),event.stopPropagation())}).on("change",function(event){var el=$(this),value=$.fn.dragaround.plugin.prototype.convertTo(parseFloat(el.val()),parseFloat(el.attr("min")),parseFloat(el.attr("max")));if(value=Math.max(0,Math.min(value,1)),value||0==value){var array={};array[el.attr("data-component")]=value,self.updateWithArray(array)}self.updateControl(!0,!0,!0),event.preventDefault(),event.stopPropagation()})},updateWithArray:function(el){return"r"in el||"g"in el||"b"in el?this.updateRGB(el.r,el.g,el.b,el.a):this.updateHSV(el.h,el.s,el.v,el.a)},updateRGB:function(r,g,b,a){var col=this.$color.toRGB();return void 0!==r&&(col.r=r),void 0!==g&&(col.g=g),void 0!==b&&(col.b=b),void 0!==a&&(col.a=a),col=this.$color.RGBtoHSV(col.r,col.g,col.b,col.a),this.updateHSV(col.h,col.s,col.v,col.a)},updateHSV:function(h,s,v,a){void 0!==h&&(this.$color.value.h=h),void 0!==s&&(this.$color.value.s=s),void 0!==v&&(this.$color.value.v=v),void 0!==a&&(this.$color.value.a=a),this.$color.value.valid=!0,this.$color.input=null,this.$color.format="hsl"},updateControl:function(updaterelated,updatehandler,updateadvanced){var rgba=this.$color,hue=new Color({h:this.$color.value.h,s:1,v:1,a:1}),rgb=new Color({h:this.$color.value.h,s:this.$color.value.s,v:this.$color.value.v,a:1});if(rgba=rgba.toString(),rgb=rgb.toString(),hue=hue.toString(),this.$saturation.css({backgroundColor:hue}),this.$alpha.css({backgroundColor:rgb}),this.$container.find(".update-current").css({backgroundColor:rgba}),updaterelated&&this.options.change&&this.options.change(this.$color),updatehandler&&(this.$saturationHandle.dragaround("setX",this.$color.value.s),this.$saturationHandle.dragaround("setY",this.$color.value.v),this.$saturationHandle.dragaround("updatePosition"),this.$alphaHandle.dragaround("setX",this.$color.value.a),this.$alphaHandle.dragaround("updatePosition"),this.$hueHandle.dragaround("setY",this.$color.value.h),this.$hueHandle.dragaround("updatePosition")),updateadvanced&&this.$advancedContainer.is(":visible")){var component=$.extend(this.$color.toRGB(this.$color.value.h,this.$color.value.s,this.$color.value.v,this.$color.value.a),this.$color.value);$.each(this.$advancedControl,function(){var color=$(this),value=component[color.attr("data-component")]*color.attr("max");value=$.fn.dragaround.plugin.prototype.convertToReverse(component[color.attr("data-component")],parseFloat(color.attr("min")),parseFloat(color.attr("max"))),value=$.fn.dragaround.plugin.prototype.fixedTo(value,parseFloat(color.attr("step"))),color.val(value)})}}};var COLOR_FIELD_SETTER=null;ColorControl.prototype={constructor:ColorControl,defaults:{mobileWidth:600,templates:{container:'<div class="color-setter-control"/>',addon:'<div class="color-setter-addon" data-toggle="dropdown"><div class="color-setter-color update-current"/></div>',dropdown:'<div class="dropdown-menu"/>',modal:'<div class="modal fade">                    <div class="modal-dialog modal-sm">                        <div class="modal-content">                            <div class="modal-header">                                <strong>Pick a color</strong>                            </div>                            <div class="modal-body">                            </div>                        </div>                    </div>                    </div>'}},buildData:function(){this.$color=new Color(this.$original.val())},buildContainer:function(){this.$container=$(this.options.templates.container),this.$original.after(this.$container)},buildInput:function(){this.$original.attr("type","input").addClass("form-control").on("keyup",$.proxy(function(event){return/^(38|40)$/.test(event.keyCode)?(38==event.keyCode&&this.$container.hasClass("open")&&this.$addon.trigger("click.bs.dropdown"),40!=event.keyCode||this.$container.hasClass("open")||this.$addon.trigger("click.bs.dropdown"),event.preventDefault(),void event.stopPropagation()):(this.buildData(),this.updateControl(!1),void this.buildSetter())},this)).on("click",$.proxy(function(event){this.$container.hasClass("open")&&event.stopPropagation()},this)),this.$container.append(this.$original)},buildAddon:function(){this.$addon=$(this.options.templates.addon).off("keydown.bs.dropdown.data-api").on("click",$.proxy(this.route,this)),this.$original.attr("disabled")&&this.$addon.addClass("disabled").attr("disabled","disabled"),this.$original.after(this.$addon)},route:function(){this.$original.attr("disabled")?this.$addon.removeAttr("data-toggle"):(this.$isMobile=this.options.mobileWidth&&$(window).width()<=this.options.mobileWidth,this.$isMobile?(this.buildSetter(),this.$modal.modal(),this.$addon.attr("data-toggle","modal")):this.$addon.attr("data-toggle","dropdown"))},buildModal:function(){this.$modal=$(this.options.templates.modal),this.$original.after(this.$modal)},buildDropdown:function(){this.$dropdown=$(this.options.templates.dropdown).on("click",function(event){event.stopPropagation()}),this.$original.after(this.$dropdown),this.$container.on("show.bs.dropdown",$.proxy(this.buildSetter,this))},buildSetter:function(){COLOR_FIELD_SETTER||(COLOR_FIELD_SETTER=$("<div/>").colorsetter()),this.$setter=COLOR_FIELD_SETTER,this.$setterAPI=COLOR_FIELD_SETTER.data("colorsetter"),this.$setterAPI.$color=this.$color,this.$setterAPI.$previous.css({backgroundColor:this.$color.toString()}),this.$setterAPI.$cancel.attr("data-color",this.$original.val()),this.$setterAPI.options.change=$.proxy(function(color){this.$color=color,this.updateControl(!0)},this),this.$setterAPI.options.ok=$.proxy(function(){this.$modal.hasClass("in")&&this.$modal.modal("hide"),this.$container.hasClass("open")&&this.$addon.trigger("click.bs.dropdown")},this),this.$setterAPI.options.cancel=this.$setterAPI.options.ok,this.$setterAPI.updateControl(!1,!0,!0),this.$isMobile?(this.$addon.attr("data-toggle","modal"),this.$modal.find(".modal-body").append(this.$setter)):(this.$addon.attr("data-toggle","dropdown"),this.$dropdown.append(this.$setter))},updateControl:function(updateinput){var rgba=this.$color.toString();this.$color.value.valid?this.$addon.addClass("success"):this.$addon.removeClass("success"),this.$addon.children().css({backgroundColor:rgba}),updateinput&&this.$color.input&&this.$original.val(this.$color.input),updateinput&&!this.$color.input&&this.$original.val(rgba),!updateinput||this.$color.value.valid||this.$color.input||this.$original.val("")}},$.fn.registerPlugin(ColorSetter,"colorsetter"),$.fn.registerPlugin(ColorControl,"colorcontrol")}(window.jQuery),!function($){function FileSetter(original,options){this.options=$.extend({},this.defaults,options),this.$original=$(original),this.buildContainer(),this.buildAddon(),this.buildInput(),this.buildRemove(),this.buildBrowse(),this.buildCapture(),this.refresh()}FileSetter.prototype={constructor:FileSetter,defaults:{templates:{container:'<div class="input-group input-filesetter"/>',input:'<input type="text" class="form-control disabled file-label" readonly disabled>',remove:'<div class="input-group-btn file-close">                            <div class="btn btn-default">                                &times;                            </div>                        </div>',addon:'<div class="input-group-btn input-group-file"/>',browse:'<div class="btn btn-file btn-default">                            <i class="glyphicon glyphicon-folder-open"></i>                            <span class="filesetter-text">Browse</span>                        </div>',camera:'<div class="btn btn-file btn-default btn-camera hidden-sm hidden-md hidden-lg">                            <i class="glyphicon glyphicon-camera"></i>                        </div>',microphone:'<div class="btn btn-file btn-default btn-microphone hidden-sm hidden-md hidden-lg">                            <i class="glyphicon glyphicon-volume-up"></i>                        </div>'},capture:void 0},buildContainer:function(){this.$container=$(this.options.templates.container),this.$original.after(this.$container)},buildAddon:function(){this.$addon=$(this.options.templates.addon),this.$container.append(this.$addon)},buildInput:function(){this.$input=$(this.options.templates.input),this.$container.append(this.$input)},buildRemove:function(){this.$remove=$(this.options.templates.remove).on("click",$.proxy(function(){this.$remove.detach(),this.$input.val(""),this.$original.val("")},this))},buildBrowse:function(){this.$browse=$(this.options.templates.browse),this.$original.attr("data-label")&&this.$browse.find(".filesetter-text").html(this.$original.attr("data-label")),this.$addon.append(this.$browse),this.$original.removeAttr("capture").on("change",$.proxy(this.refresh,this)),this.$original.attr("disabled")&&this.$browse.addClass("disabled").attr("disabled","disabled"),this.$addon.append(this.$original)},buildCapture:function(){(void 0==this.options.capture||1==this.options.capture)&&("Image"==this.$original.attr("data-field-name")&&(this.options.capture="camera"),"Sound"==this.$original.attr("data-field-name")&&(this.options.capture="microphone"),this.$original.attr("capture")&&this.$original.attr("capture")),this.options.capture&&(this.$capture=$(this.options.templates[this.options.capture]).on("click",$.proxy(function(){this.$original.attr("capture",this.options.capture).trigger("click").removeAttr("capture")},this)),this.$addon.append(this.$capture))},refresh:function(){var numFiles=this.$original.get(0).files?this.$original.get(0).files.length:1;1==numFiles?(this.$container.append(this.$remove),this.$input.val(this.$original.val().replace(/\\/g,"/").replace(/.*\//,""))):numFiles>1?(this.$container.append(this.$remove),this.$input.val(numFiles+" files selected")):this.$remove.detach()}},$.fn.registerPlugin(FileSetter,"filesetter")}(window.jQuery),!function($){function SmartControl(original,options){this.options=$.extend({},this.defaults,options),this.$original=$(original),this.buildInput(),this.buildGroup(),this.buildAddon()}SmartControl.prototype={constructor:SmartControl,defaults:{templates:{addon:'<div class="icon-wolfram smart-icon form-control-feedback"/>'},groupClasses:"has-feedback form-group-smart",inputClasses:"smart-input",popover:{trigger:"hover",placement:"bottom",html:!0,template:'<div class="popover popover-smart-control"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'}},buildInput:function(){this.$input=this.$original,this.options.inputClasses&&this.$input.addClass(this.options.groupClasses)},buildGroup:function(){this.$group=this.$original.wrap("<div></div>").parent(),this.options.groupClasses&&this.$group.addClass(this.options.groupClasses)},buildAddon:function(){this.$addon=$(this.options.templates.addon),this.$addon.hasClass("smart-icon")&&this.$addon.hasClass("form-control-feedback")&&(this.$original.hasClass("input-sm")?this.$addon.addClass("form-control-feedback-sm"):this.$original.hasClass("input-lg")?this.$addon.addClass("form-control-feedback-lg"):this.$addon.addClass("form-control-feedback-md")),this.$group.append(this.$addon),this.$addon.popover($.extend(!0,this.options.popover,{content:this.popoverContent()}))},popoverContent:function(){var prompt=this.$original.attr("data-field-prompt"),verbose=this.$original.attr("data-field-verbose")||this.$original.attr("data-field-name"),examples=this.$original.attr("data-field-examples");prompt&&(prompt=prompt.split("||")),prompt||(prompt={}),prompt[0]||(prompt[0]="Enter any "+verbose),prompt[1]||(prompt[1]="(Or anything specifying one)"),prompt[0]=prompt[0].replace(new RegExp(verbose,"i"),function(arg,match){return"<strong>"+arg+"</strong>"});var s='<h5 class="page-header smart-control-header">Wolfram Smart Field</h5>';if(s+='<p class="smart-control-description">',s+=prompt[0],s+="<br/>",s+="<small>"+prompt[1]+"</small>",s+="</p>",examples){examples=examples.split("||"),s+='<div class="smart-control-example-title">Examples:</div>',s+='<div class="smart-control-example-list">';for(var i in examples)s+='<div class="smart-control-example">'+examples[i]+"</div>";s+="</div>"}return s}},$.fn.registerPlugin(SmartControl,"smartcontrol")}(window.jQuery),!function($){function DisambiguationControl(original,options){this.options=$.extend({},this.defaults,options),this.$original=$(original),this.buildCloser(),this.buildContainer(),this.buildSelect(),this.buildInput(),this.buildHelp()}DisambiguationControl.prototype={constructor:DisambiguationControl,defaults:{templates:{container:'<div class="input-group smart-select-cont"/>',input:'<input type="text" class="form-control"/>',closer:'<div class="input-group-btn"><div class="btn btn-default">&times;</div></div>'}},buildContainer:function(){this.$container=$(this.options.templates.container),this.$original.wrapInner(this.$container)},buildSelect:function(){var self=this;this.$select=this.$original.find("button[data-field-type=Semantic],button[data-field-type=Computed]").on("keydown.bs.dropdown.data-api",function(event){var is_open=self.$selectContainer.hasClass("open");/^(8)$/.test(event.keyCode)?self.hideSelect(event):/^(37)$/.test(event.keyCode)?($(this).closest(".select").prevAll(".select").find(".form-control").focus(),is_open&&$(this).trigger("click.bs.dropdown")):/^(39)$/.test(event.keyCode)?($(this).closest(".select").nextAll(".select").find(".form-control").focus(),is_open&&$(this).trigger("click.bs.dropdown")):/^(38)$/.test(event.keyCode)&&!is_open&&self.hideSelect(event)}),this.$selectContainer=this.$original.find(".select"),this.$hidden=this.$original.closest(".form-group").find(".select-hidden"),this.$selectContainer.each(function(){var self=$(this);self.children("button").append(self.children(".form-control-feedback").removeClass("form-control-feedback"))}),this.$original.find(".disambiguation-text").addClass("form-control readonly").attr("readonly","readonly").each(function(){$(this).text().trim()||$(this).hide()}),this.$original.prepend(this.$hidden)},buildInput:function(){for(this.$input=$(this.options.templates.input),this.$original.prepend(this.$input),i=0;i<this.$select[0].attributes.length;i++){var a=this.$select[0].attributes[i];/^(value|name|id|type|data-toggle|data-trigger|style)$/.test(a.name)||this.$input.attr(a.name,a.value)}this.$input.smartcontrol().on("click focus",$.proxy(function(event){this.$select.is(":visible")&&(this.$select.first()[event.type](),event.stopPropagation(),event.preventDefault())},this)).on("keydown",$.proxy(function(event){/^(38|40)$/.test(event.keyCode)&&!this.$select.is(":visible")&&(/^(40)$/.test(event.keyCode)&&this.restoreSelect(event),event.preventDefault(),event.stopPropagation())},this))},buildCloser:function(){this.$closer=$(this.options.templates.closer).on("click",$.proxy(this.hideSelect,this)),this.$original.prepend(this.$closer)},buildHelp:function(){if(this.$help=this.$original.closest(".form-group").find(".help-error"),/^(Review the choice. You typed )/.test(this.$help.text())){var input_setter=$('<a class="help-input" href="#"></a>').html(this.$original.attr("data-field-input")).on("click",$.proxy(this.hideSelect,this));this.$help.html("Review the choice. ").append($('<span class="glyphicon glyphicon-question-sign help-message help-icon"></span> ').popover({content:"Submit the form to use this choice",trigger:"hover",placement:"right"})).append(' <span class="help-message">You typed</span> ').append(input_setter)}this.$didYouMean=$('<p class="help-block help-error"><span class="help-hint">Did you mean:</span> <a class="help-input" href="#"></a></p>'),this.$help.after(this.$didYouMean),this.$didYouMean.hide().on("click",$.proxy(this.restoreSelect,this))},restoreSelect:function(event){this.$input.removeAttr("name").val(""),this.$hidden.removeAttr("disabled"),this.$original.find(".smart-select-cont").show(),this.$select.first().focus(),this.$didYouMean.hide(),this.$help.show(),event&&event.stopPropagation(),event&&event.preventDefault()},hideSelect:function(event){this.$hidden.attr("disabled","disabled"),this.$selectContainer.hasClass("open")&&this.$select.trigger("click.bs.dropdown"),this.$original.find(".smart-select-cont").hide(),this.$help.hide(),this.$didYouMean.show().find(".help-input").html(this.$original.find(".select-text,.disambiguation-text").text()),this.$input.attr("name",this.$hidden.attr("name")).val(this.$original.attr("data-field-input")).focus(),event&&event.stopPropagation(),event&&event.preventDefault()}},$.fn.registerPlugin(DisambiguationControl,"disambiguationcontrol")}(window.jQuery),$(document).ready(function(){$('[type="range"]').slidercontrol()}),$(document).ready(function(){$("select:not([multiple])").smartselect()}),$(document).ready(function(){$('[type="color"]').colorcontrol()}),$(document).ready(function(){$(":file:not(.image-capture)").filesetter(),$(document).on("dragover",function(evt){$("body").addClass("body-state-drag")}).on("dragleave drop dragend",function(evt){$("body").removeClass("body-state-drag")})}),$(document).ready(function(){$("input[data-field-type=Semantic],input[data-field-type=Computed]").smartcontrol()}),$(document).ready(function(){$(".disambiguation-control").disambiguationcontrol()}),$(document).ready(function(){$(":input:visible").each(function(index){var self=$(this);"hidden"!==self.attr("type")&&(0==index&&self.focus(),self.attr("tabindex",index+1))})}),$(document).ready(function(){$('[data-toggle="popover"]').popover({html:!0}),$('[data-toggle="tooltip"]').tooltip()}),$(document).ready(function(){$(".col-delete .form-button").hover(function(){$(this).addClass("form-button").closest(".paneled-multicontrol").addClass("paneled-multicontrol-remove")},function(){$(this).closest(".paneled-multicontrol").removeClass("paneled-multicontrol-remove")})}),$(document).ready(function(){var link=$('<div class="wolfram-branding dropup">            <a class="wolfram-branding-cloud" href="http://www.wolfram.com/cloud/" target="_blank" data-toggle="dropdown" data-></a>            <ul class="wolfram-branding-menu dropdown-menu">                <div class="wolfram-branding-menu-body">                <!-- Dropdown menu links -->                <a class="wolfram-branding-link-primary" target="_blank" href="http://www.wolfram.com/cloud/">About Wolfram Cloud &raquo;</a>                <a class="wolfram-branding-link-secondary" target="_blank" href="http://www.wolfram.com/legal/terms/wolfram-cloud.html">Terms of use &raquo;</a>                <a class="wolfram-branding-link-secondary" target="_blank" href="http://www.wolfram.com/knowledgebase/source-information/">Data source information &raquo;</a>                </div>            </ul>        </div>');$("body").append(link).addClass("has-wolfram-branding"),link.mouseleave(function(event){link.hasClass("open")&&link.find(".wolfram-branding-cloud").dropdown("toggle")}).find(".wolfram-branding-cloud").hover(function(event){link.hasClass("open")||$(this).dropdown("toggle")})}),$(document).ready(function(){$(window).unload(function(){$(".btn-submit-loading").button("reset")});var submitWithAddRemove=!1;$("form .form-button").on("click",function(e){submitWithAddRemove=!0,$(this).find(".icon-default").hide().after('<i class="glyphicon glyphicon-refresh glyphicon-spin icon-loading"/>')}),$("form").on("submit",function(e){$(this).find("input[type=file]").length>0?$(this).attr("enctype","multipart/form-data"):$(this).removeAttr("enctype");var width=$("[data-image-formatting-width]").width(),form=$(this),submit=form.find("[type=submit]"),button=submit.filter(".form-submit");if(width){var input=form.find("[name=_imageformattingwidth]");0==input.length&&(input=$('<input type="hidden" name="_imageformattingwidth"/>'),form.append(input)),input.val(width)}submitWithAddRemove||button.attr("autocomplete","off").addClass("btn-submit-loading").attr("data-loading-text",button.attr("data-loading-text")||'<div class="loading-status">                        <i class="glyphicon glyphicon-stop"/>                        <i class="glyphicon glyphicon-stop"/>                        <i class="glyphicon glyphicon-stop"/>                        <i class="glyphicon glyphicon-stop"/>                    </div>').button("loading").addClass("btn-loading"),setTimeout(function(){submit.attr("disabled","disabled")},100),setTimeout(function(){submit.removeAttr("disabled").filter(".btn-loading").button("reset"),form.find(".icon-loading").remove(),form.find(".icon-default").show()},2e4)})}),$(function(){function sendSize(){var data={message:"dimensions",width:$("body").width(),height:$("body").height(),fields:$.map($("[data-field-name]"),function(i){return $(i).attr("data-field-type")+$(i).attr("data-field-name")})};parent.postMessage(data,"*")}$(window).on("resize",sendSize),$(document).load(sendSize).ready(function(){sendSize(),setTimeout(sendSize,500),setTimeout(sendSize,1e3),setTimeout(sendSize,1500),setTimeout(sendSize,2e3)})});